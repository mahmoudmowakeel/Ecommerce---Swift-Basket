<section class="bg-black text-white shadow-xl h-full w-[75%] mx-auto my-5 py-5 rounded-xl border border-yellow-500 p-5">
  <h1 class="text-main text-center text-2xl anton tracking-wider mb-3">Register Now</h1>
  <form class="w-full" [formGroup]="registerForm" (ngSubmit)="register()">
    <div class="flex flex-col md:flex-row items-center justify-center gap-3 mx-auto w-fit my-3">
      <label for="name">Name</label>
      <input
        formControlName="name"
        class="rounded-sm h-fit text-black px-2"
        type="text"
        name="name"
        [ngClass]="{
          'border border-red-600 outline-none' : registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty),
          'border border-green-600 outline-none' : !registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty),
        }"
      />
      @if(registerForm.get('name')?.errors && (registerForm.get('name')?.touched
      || registerForm.get('name')?.dirty) ) {
      @if(registerForm.get('name')?.getError('required')){
      <p class="text-red-500 block">The name field is required</p>
      } @else if (registerForm.get('name')?.getError('minlength')) {
      <p class="text-red-500 block">The name should be at least 3 characters</p>
      } @else if(registerForm.get('name')?.getError('maxlength')) {
      <p class="text-red-500 block">The name should be maximum 20 characters</p>
      } }
    </div>
    <div class="flex flex-col md:flex-row items-center justify-center  gap-3 mx-auto w-fit my-3">
      <label for="email">Email</label>
      <input
        formControlName="email"
        class="rounded-sm h-fit text-black px-2"
        type="email"
        name="email"
        [ngClass]="{
          'border border-red-600 outline-none' : registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty),
          'border border-green-600 outline-none' : !registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty),
        }"
      />
      @if(registerForm.get('email')?.errors &&
      (registerForm.get('email')?.touched || registerForm.get('email')?.dirty ))
      { @if(registerForm.get('email')?.getError('required')) {
      <p class="text-red-500 block">The email is required</p>
      } @else if(registerForm.get('email')?.getError('email')) {
      <p class="text-red-500 block">The email is in invaild format</p>
      } }
    </div>
    <div class="flex flex-col md:flex-row items-center justify-center gap-3 mx-auto w-fit my-3">
      <label for="phone">Phone</label>
      <input
        formControlName="phone"
        class="rounded-sm h-fit text-black px-2"
        type="tel"
        name="phone"
        [ngClass]="{
          'border border-red-600 outline-none' : registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty),
          'border border-green-600 outline-none' : !registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty),
        }"
      />
      @if(registerForm.get('phone')?.errors &&
      (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty)) {
      @if(registerForm.get('phone')?.getError('required')) {
      <p class="text-red-500 block">The phone is required</p>
      } @else if(registerForm.get('phone')?.getError('pattern')) {
      <p class="text-red-500 block">The phone is in invaild format</p>
      } }
    </div>
    <div class="flex flex-col md:flex-row items-center justify-center gap-3 mx-auto w-fit my-3">
      <label for="passowrd">Passowrd</label>
      <input
        formControlName="password"
        class="rounded-sm h-fit text-black px-2"
        type="password"
        name="password"
        [ngClass]="{
          'border border-red-600 outline-none' : registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty),
          'border border-green-600 outline-none' : !registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty),
        }"
      />
      @if(registerForm.get('password')?.errors &&
      (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)) {
      @if(registerForm.get('password')?.getError('required')) {
      <p class="text-red-500 block">The password is required</p>
      } @else if(registerForm.get('password')?.getError('pattern')) {
      <p class="text-red-500 block">The password is in invaild format</p>
      } }
    </div>
    <div class="flex flex-col md:flex-row items-center justify-center gap-3 mx-auto w-fit my-3">
      <label for="rePassword">Re-Password</label>
      <input
        formControlName="rePassword"
        class="rounded-sm h-fit text-black px-2"
        type="password"
        name="rePassword"
        [ngClass]="{
          'border border-red-600 outline-none' : registerForm.getError('missMatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty),
          'border border-green-600 outline-none' : !registerForm.getError('missMatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty),
        }"
      />
      @if(registerForm.getError('missMatch') &&
      (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty)) {
      <p class="text-red-500 block">The password does not match</p>
      }
    </div>
    <button
      [disabled]="registerForm.invalid || isLoading"
      type="submit"
      class="bg-yellow-500 md:px-5 w-full py-1 md:py-2 text-black font-bold text-md md:text-lg rounded-lg  mx-auto md:ml-auto btn-main block mt-4"
    >
      Register
    </button>

    @if(errMessage) {
    <p class="text-black p-3 bg-red-300 my-3 text-center">{{ errMessage }}</p>
    } @if(successMessage) {
    <p class="text-black p-3 bg-green-300 my-3 text-center">{{ successMessage }}</p>
    }
  </form>
</section>
